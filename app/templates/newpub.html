{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block content %}

<div class="container">
	<div class="row">
		<div class="col-1"></div>

		<div class="col-10 ml-4 mr-4">
			<div class="jumbotron rounded" style="background-color: white;" id="jumbodoi">
				<!--Add form fields here-->
				<h1 class="text-center mb-4">New Publication</h1>
				<div class="row">
					<div class="col-1"></div>
					<div class="col-10">
						<div class="jumbotron rounded border-3 text-white"
							style="background: #000 url(&quot;{{url_for('static', filename='images/elevenphotographs-ueyhzkL1_0k-unsplash.jpg')}}&quot;) top center no-repeat"
							alt="">
							<h4 class="text-center mb-4">DOI Search</h4>

							<form action="" method="POST">
								<div class="form-row justify-content-center">
									<div class="col-6 input-group">
										<input type="text" id="crossref" name="doifind" class="form-control">
										<div class="input-group-append">
											<input type="submit" value="Find" class="btn btn-success">
										</div>
									</div>
								</div>
							</form>
						</div>

						<!--Actual form-->
						<form id="author-form" action="" method="POST" role="form">
							<!--add hidden_tag for CRSF security-->
							{{ form.hidden_tag() }}
							<div class="form-group">
								{{ wtf.form_field(form.title)}}
								{{ wtf.form_field(form.doi)}}
								{{ wtf.form_field(form.publisher) }}
								{{ wtf.form_field(form.publication) }}
								{{ wtf.form_field(form.year) }}
								<a id="add" href="#">Add Author</a>
								<div id="subforms-container">
									{% for subform in form.authors %}
										<div id="author-{{ loop.index0 }}-form" class="subform" data-index="{{ loop.index0 }}">
											{{ subform.first_name.label }}
											{{ subform.first_name }}
					
											{{ subform.last_name.label }}
											{{ subform.last_name }}
					
											<a class="remove" href="#">Remove</a>
										</div>
									{% endfor %}
								</div>



								{{ form.submit() }}

							</div>

						</form>
						{% if form.errors %}
							{{ form.errors }}
						{% endif %}

						{# Form template #}
						<div id="author-_-form" class="is-hidden" data-index="_">
							<label for="authors-_-first_name">First Name</label>
							<input id="authors-_-first_name" name="authors-_-first_name" type="text" value="">
				
							<label for="authors-_-last_name">Last Name</label>
							<input id="authors-_-last_name" name="authors-_-last_name" type="text">
				
							<a class="remove" href="#">Remove</a>
						</div>

						{# Show submitted data #}
						{% if data is defined %}
							<p>Received data: {{ data }}</p>
						{% endif %}

						<div class="col-1"></div>


					</div>
					<div class="row">

					</div>


				</div>
			</div>

			<div class="col-1"></div>

		</div>

	</div>

	{% endblock %}